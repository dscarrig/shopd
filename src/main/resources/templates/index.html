<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ShopD</title>
</head>
<body>
    <h1>ShopD</h1>
    <div id="userStatus"></div>
    <a th:href="@{/login}" href="#">Login</a>
    <p></p>
    <a th:href="@{/create-user}" href="#">Create User</a>

    <script>
        // Check if user is logged in and display username
        const token = localStorage.getItem('token');
        if (token) {
            try {
                // Decode JWT token (payload is the middle part between dots)
                const payload = JSON.parse(atob(token.split('.')[1]));
                const username = payload.sub; // JWT standard claim for username
                document.getElementById('userStatus').textContent = 'Logged in as ' + username;
            } catch (e) {
                console.error('Error decoding token:', e);
            }
        }
    </script>
</body>
</html>